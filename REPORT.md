# Второе индивидуальное домашнее задание по АВС
## Вариант 9, Пономарев Степан Алексеевич, БПИ216
### Задание:
Разработать программу, которая "переворачивает на месте" заданную ASCII-строку символов
(не копируя строку в другой буфер)
#### Результаты:    
##### На 4 балла:
![img](/4-1.png)
![img](/4-2.png)
- Приведено решение программы на языке C (находится в файле 4.c)

С помощью командной строки и приведённых ниже команд, получаем исходный .s-файл, а также исполняемый файл: \
$gcc -O0 -Wall -fno-asynchronous-unwind-tables 4.c -o 4 \
$gcc -O0 -Wall -fno-asynchronous-unwind-tables -S 4.c -o 4.s \
$gcc 4.s -o
Далее представлены результаты тестирования обеих программ.

![img](/res1.png)

По результатам тестирования делаем однозначный вывод, что программы работают эквивалентно и правильно.
- Команды для проверки:
gcc 4.s
gcc ./a.out

##### На 5 баллов:
В программе реализованы функции с передачей данных через параметры (файл 5.c , скриншот программы ниже)
###### Описание функций
\
char *get_string(int *len, int *test) -- на входе принимает два указателя. Первый указатель (len) на переменную, в которой будет лежать длина строки, второй (test) на переменную, которая отображает, корректен ли ввод. Возвращает указатель на начало строки, которую ввёл пользователь.

void reverse(char *s, int len) -- на входе принимает указатель (s) на начало строки, которую нужно "перевернуть", и целочисленную переменную (len) -- длину строки, которую нужно "перевернуть".

Необходимые комментарии также были добавлены в программу 5.s

###### скриншот программы 5.c
![img](/5-1.png)
![img](/5-2.png)

##### На 6 баллов:
Был осуществлён рефакторинг программы (с последующим добавлением комментариев) с целью максимального использования регистров. Были изменены некоторые команды. К примеру, movl был заменён на movq. Были изменены регистры, контактирующие с новыми регистрами. Например, movl eax, -24(%rbp) изменён на movq rax, r12.

Демонстрируем результаты тестов новой и предыдущих программ\
![img](/res2.png)

По результатам тестирования делаем однозначный вывод, что программы работают эквивалентно и правильно.
- Команды для проверки:
gcc 6.s
gcc ./a.out

- Сравним размеры 5.s и 6.s: \
5.s -- 186 строк, 3,37 Кб \
6.s -- 207 строк, 3,47 Кб

##### На 7 баллов:
Полученная ранее в результате компиляции программа на ассемблере реализована в виде двух единиц компиляции. Это файлы "6-1.s" и "6-2.s". Одна часть содержит код с функциями, описанными в блоке "на 5 баллов", другая часть содержит main.
Полученные файлы были скомпилированы, запущены и работали корректно.
- Команды для проверки:
gcc 6-1.s 6-2.s
gcc ./a.out

Последний .c-файл был переделан, чтобы получать данные из файлов в командной строке (int argc, char * argv[]) и сохранён в 7.c и скомпилирован в 7.s. Помимо этого, были реализованы проверка открытия файла и ввода через int argc.

- Команды для проверки:
gcc 7.s
gcc ./a.out input.txt output.txt

Также были добавлены дополнительные файлы для тестирования программы -- "testfile_1.txt", "testfile_2.txt", "testfile_3.txt".
